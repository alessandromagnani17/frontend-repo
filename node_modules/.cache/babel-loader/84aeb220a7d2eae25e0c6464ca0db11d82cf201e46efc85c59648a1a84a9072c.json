{"ast":null,"code":"import axios from \"axios\";\nexport default {\n  data() {\n    return {\n      currentStep: 1,\n      loading: false,\n      errors: {},\n      form: {\n        confirmationCode: \"\"\n      },\n      email: this.$route.params.email\n    };\n  },\n  methods: {\n    async onSubmit() {\n      this.loading = true;\n      this.errors = {};\n      console.log(\"Inizio invio dati...\");\n      const requestData = {\n        email: this.email,\n        confirmation_code: this.form.confirmationCode\n      };\n      console.log(\"Dati inviati:\", requestData);\n      try {\n        const response = await axios.post(\"http://127.0.0.1:5000/confirm\", requestData);\n        console.log(\"Risposta del server:\", response.data);\n        if (response.data.message === \"Email confirmed successfully.\") {\n          alert(\"Successo: Email confermata.\");\n          this.$router.push(\"/login\");\n        } else {\n          this.handleError(response.data.error || \"Errore sconosciuto\");\n        }\n      } catch (error) {\n        console.error(\"Errore di conferma:\", error);\n        if (error.response) {\n          console.error(\"Dati della risposta di errore:\", error.response.data);\n          this.handleError(error.response.data.message || error.response.data.error || \"Errore nella conferma\");\n        } else {\n          this.handleError(\"Errore di rete. Verifica la tua connessione.\");\n        }\n      } finally {\n        this.loading = false;\n      }\n    },\n    handleError(errorMessage) {\n      this.errors.general = errorMessage;\n      alert(\"Errore: \" + errorMessage);\n    },\n    isStepValid() {\n      return this.form.confirmationCode.length > 0;\n    },\n    async resendConfirmationCode() {\n      this.loading = true;\n      try {\n        await axios.post(\"http://127.0.0.1:5000/resend-confirmation\", {\n          email: this.email\n        });\n        alert(\"Nuovo codice di conferma inviato. Controlla la tua email.\");\n      } catch (error) {\n        console.error(\"Errore nell'invio del nuovo codice:\", error);\n        this.handleError(\"Errore nell'invio del nuovo codice. Riprova più tardi.\");\n      } finally {\n        this.loading = false;\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","data","currentStep","loading","errors","form","confirmationCode","email","$route","params","methods","onSubmit","console","log","requestData","confirmation_code","response","post","message","alert","$router","push","handleError","error","errorMessage","general","isStepValid","length","resendConfirmationCode"],"sources":["/Users/alessandromagnani/Desktop/Università/applicazioni-e-servizi-web/osteoarthritis-project/frontend/src/components/EmailConfirmation.vue"],"sourcesContent":["<template>\n  <div class=\"register\">\n    <div class=\"container mt-5\">\n      <div class=\"header\">\n        <button\n          v-if=\"currentStep > 1\"\n          class=\"back-button\"\n          @click=\"goToPreviousStep\"\n        >\n          <img src=\"@/assets/back-icon.svg\" alt=\"Indietro\" class=\"back-icon\" />\n        </button>\n      </div>\n\n      <span class=\"step-title\">Passaggio {{ currentStep }} di 1</span>\n      <h2 class=\"mb-4\">Conferma il tuo Account</h2>\n\n      <form @submit.prevent=\"onSubmit\">\n        <div v-if=\"currentStep === 1\">\n          <div class=\"mb-3\">\n            <label for=\"confirmationCode\" class=\"form-label\"\n              >Codice di conferma</label\n            >\n            <input\n              id=\"confirmationCode\"\n              v-model=\"form.confirmationCode\"\n              type=\"text\"\n              class=\"form-control\"\n              required\n            />\n          </div>\n        </div>\n\n        <div v-if=\"currentStep === 1\">\n          <button\n            type=\"submit\"\n            class=\"btn btn-primary btn-next\"\n            :disabled=\"loading || !isStepValid(currentStep)\"\n          >\n            <span v-if=\"loading\">Conferma...</span>\n            <span v-else>Conferma il Codice</span>\n          </button>\n\n          <div v-if=\"errors.general\" class=\"invalid-feedback mt-3\">\n            {{ errors.general }}\n          </div>\n        </div>\n      </form>\n    </div>\n\n    <div v-if=\"loading\" class=\"loading-overlay\">\n      <div class=\"loading-icon\">\n        <img src=\"@/assets/loading-icon.svg\" alt=\"Loading...\" />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  data() {\n    return {\n      currentStep: 1,\n      loading: false,\n      errors: {},\n      form: {\n        confirmationCode: \"\",\n      },\n      email: this.$route.params.email,\n    };\n  },\n  methods: {\n    async onSubmit() {\n      this.loading = true;\n      this.errors = {};\n      console.log(\"Inizio invio dati...\");\n\n      const requestData = {\n        email: this.email,\n        confirmation_code: this.form.confirmationCode,\n      };\n\n      console.log(\"Dati inviati:\", requestData);\n\n      try {\n        const response = await axios.post(\n          \"http://127.0.0.1:5000/confirm\",\n          requestData\n        );\n\n        console.log(\"Risposta del server:\", response.data);\n\n        if (response.data.message === \"Email confirmed successfully.\") {\n          alert(\"Successo: Email confermata.\");\n          this.$router.push(\"/login\");\n        } else {\n          this.handleError(response.data.error || \"Errore sconosciuto\");\n        }\n      } catch (error) {\n        console.error(\"Errore di conferma:\", error);\n        if (error.response) {\n          console.error(\"Dati della risposta di errore:\", error.response.data);\n          this.handleError(\n            error.response.data.message ||\n              error.response.data.error ||\n              \"Errore nella conferma\"\n          );\n        } else {\n          this.handleError(\"Errore di rete. Verifica la tua connessione.\");\n        }\n      } finally {\n        this.loading = false;\n      }\n    },\n    handleError(errorMessage) {\n      this.errors.general = errorMessage;\n      alert(\"Errore: \" + errorMessage);\n    },\n    isStepValid() {\n      return this.form.confirmationCode.length > 0;\n    },\n    async resendConfirmationCode() {\n      this.loading = true;\n      try {\n        await axios.post(\n          \"http://127.0.0.1:5000/resend-confirmation\",\n          { email: this.email }\n        );\n        alert(\"Nuovo codice di conferma inviato. Controlla la tua email.\");\n      } catch (error) {\n        console.error(\"Errore nell'invio del nuovo codice:\", error);\n        this.handleError(\"Errore nell'invio del nuovo codice. Riprova più tardi.\");\n      } finally {\n        this.loading = false;\n      }\n    },\n  },\n};\n</script>\n\n<style scoped>\n/* Lo stile è lo stesso della pagina di registrazione */\n.register {\n  background: #ffffff; /* Sfondo bianco */\n  min-height: 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 0 0px 0px rgba(0, 0, 0, 0);\n}\n\n.container {\n  max-width: 600px;\n  padding: 40px;\n  border-radius: 15px;\n  background: #ffffff;\n  box-shadow: 0 12px 24px rgba(0, 0, 0, 0.1);\n  margin-top: 100px;\n  height: auto;\n}\n\n.header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n}\n\n.back-button {\n  background: transparent;\n  border: none;\n  cursor: pointer;\n  margin-left: -10px;\n}\n\n.back-icon {\n  width: 30px;\n  height: 30px;\n}\n\n.step-title {\n  font-size: 10px;\n  margin-bottom: 10px;\n}\n\nh2 {\n  font-size: 18px;\n  margin-bottom: 30px;\n}\n\n.form-label {\n  font-size: 12px;\n}\n\n.form-control {\n  background: #f2f2f2;\n  border: 1px solid #ccc;\n  border-radius: 5px;\n  font-size: 12px;\n}\n\n.input-group {\n  position: relative;\n}\n\n.btn-next {\n  width: 100%;\n  margin-top: 20px;\n  padding: 10px;\n  cursor: pointer;\n}\n\n.btn-next:hover {\n  background-color: #c0c0c0;\n}\n\n.loading-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(255, 255, 255, 0.8);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 9999;\n}\n\n.loading-icon {\n  width: 50px;\n}\n</style>\n"],"mappings":"AA0DA,OAAOA,KAAI,MAAO,OAAO;AAEzB,eAAe;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,WAAW,EAAE,CAAC;MACdC,OAAO,EAAE,KAAK;MACdC,MAAM,EAAE,CAAC,CAAC;MACVC,IAAI,EAAE;QACJC,gBAAgB,EAAE;MACpB,CAAC;MACDC,KAAK,EAAE,IAAI,CAACC,MAAM,CAACC,MAAM,CAACF;IAC5B,CAAC;EACH,CAAC;EACDG,OAAO,EAAE;IACP,MAAMC,QAAQA,CAAA,EAAG;MACf,IAAI,CAACR,OAAM,GAAI,IAAI;MACnB,IAAI,CAACC,MAAK,GAAI,CAAC,CAAC;MAChBQ,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAC;MAEnC,MAAMC,WAAU,GAAI;QAClBP,KAAK,EAAE,IAAI,CAACA,KAAK;QACjBQ,iBAAiB,EAAE,IAAI,CAACV,IAAI,CAACC;MAC/B,CAAC;MAEDM,OAAO,CAACC,GAAG,CAAC,eAAe,EAAEC,WAAW,CAAC;MAEzC,IAAI;QACF,MAAME,QAAO,GAAI,MAAMhB,KAAK,CAACiB,IAAI,CAC/B,+BAA+B,EAC/BH,WACF,CAAC;QAEDF,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAEG,QAAQ,CAACf,IAAI,CAAC;QAElD,IAAIe,QAAQ,CAACf,IAAI,CAACiB,OAAM,KAAM,+BAA+B,EAAE;UAC7DC,KAAK,CAAC,6BAA6B,CAAC;UACpC,IAAI,CAACC,OAAO,CAACC,IAAI,CAAC,QAAQ,CAAC;QAC7B,OAAO;UACL,IAAI,CAACC,WAAW,CAACN,QAAQ,CAACf,IAAI,CAACsB,KAAI,IAAK,oBAAoB,CAAC;QAC/D;MACF,EAAE,OAAOA,KAAK,EAAE;QACdX,OAAO,CAACW,KAAK,CAAC,qBAAqB,EAAEA,KAAK,CAAC;QAC3C,IAAIA,KAAK,CAACP,QAAQ,EAAE;UAClBJ,OAAO,CAACW,KAAK,CAAC,gCAAgC,EAAEA,KAAK,CAACP,QAAQ,CAACf,IAAI,CAAC;UACpE,IAAI,CAACqB,WAAW,CACdC,KAAK,CAACP,QAAQ,CAACf,IAAI,CAACiB,OAAM,IACxBK,KAAK,CAACP,QAAQ,CAACf,IAAI,CAACsB,KAAI,IACxB,uBACJ,CAAC;QACH,OAAO;UACL,IAAI,CAACD,WAAW,CAAC,8CAA8C,CAAC;QAClE;MACF,UAAU;QACR,IAAI,CAACnB,OAAM,GAAI,KAAK;MACtB;IACF,CAAC;IACDmB,WAAWA,CAACE,YAAY,EAAE;MACxB,IAAI,CAACpB,MAAM,CAACqB,OAAM,GAAID,YAAY;MAClCL,KAAK,CAAC,UAAS,GAAIK,YAAY,CAAC;IAClC,CAAC;IACDE,WAAWA,CAAA,EAAG;MACZ,OAAO,IAAI,CAACrB,IAAI,CAACC,gBAAgB,CAACqB,MAAK,GAAI,CAAC;IAC9C,CAAC;IACD,MAAMC,sBAAsBA,CAAA,EAAG;MAC7B,IAAI,CAACzB,OAAM,GAAI,IAAI;MACnB,IAAI;QACF,MAAMH,KAAK,CAACiB,IAAI,CACd,2CAA2C,EAC3C;UAAEV,KAAK,EAAE,IAAI,CAACA;QAAM,CACtB,CAAC;QACDY,KAAK,CAAC,2DAA2D,CAAC;MACpE,EAAE,OAAOI,KAAK,EAAE;QACdX,OAAO,CAACW,KAAK,CAAC,qCAAqC,EAAEA,KAAK,CAAC;QAC3D,IAAI,CAACD,WAAW,CAAC,wDAAwD,CAAC;MAC5E,UAAU;QACR,IAAI,CAACnB,OAAM,GAAI,KAAK;MACtB;IACF;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}