{"ast":null,"code":"import { createElementVNode as _createElementVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, vModelText as _vModelText, normalizeClass as _normalizeClass, withDirectives as _withDirectives, vModelCheckbox as _vModelCheckbox, withModifiers as _withModifiers, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nimport _imports_0 from '@/assets/back-icon.svg';\nconst _withScopeId = n => (_pushScopeId(\"data-v-3a5d5944\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"login\"\n};\nconst _hoisted_2 = {\n  class: \"container mt-5\"\n};\nconst _hoisted_3 = {\n  class: \"header\"\n};\nconst _hoisted_4 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"img\", {\n  src: _imports_0,\n  alt: \"Indietro\",\n  class: \"back-icon\"\n}, null, -1 /* HOISTED */));\nconst _hoisted_5 = [_hoisted_4];\nconst _hoisted_6 = {\n  class: \"step-title\"\n};\nconst _hoisted_7 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h2\", {\n  class: \"mb-4\"\n}, \"Login al tuo Account\", -1 /* HOISTED */));\nconst _hoisted_8 = {\n  key: 0\n};\nconst _hoisted_9 = {\n  class: \"mb-3\"\n};\nconst _hoisted_10 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"email\",\n  class: \"form-label\"\n}, \"Email\", -1 /* HOISTED */));\nconst _hoisted_11 = {\n  class: \"invalid-feedback\"\n};\nconst _hoisted_12 = {\n  key: 1\n};\nconst _hoisted_13 = {\n  class: \"mb-3\"\n};\nconst _hoisted_14 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"password\",\n  class: \"form-label\"\n}, \"Password\", -1 /* HOISTED */));\nconst _hoisted_15 = {\n  class: \"invalid-feedback\"\n};\nconst _hoisted_16 = {\n  class: \"mb-3 form-check\"\n};\nconst _hoisted_17 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"rememberMe\",\n  class: \"form-check-label\"\n}, \"Remember Me\", -1 /* HOISTED */));\nconst _hoisted_18 = {\n  key: 2\n};\nconst _hoisted_19 = [\"disabled\"];\nconst _hoisted_20 = {\n  key: 3\n};\nconst _hoisted_21 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"button\", {\n  type: \"submit\",\n  class: \"btn btn-primary\"\n}, \"Login\", -1 /* HOISTED */));\nconst _hoisted_22 = [_hoisted_21];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [$setup.currentStep > 1 ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 0,\n    class: \"back-button\",\n    onClick: _cache[0] || (_cache[0] = (...args) => $setup.goToPreviousStep && $setup.goToPreviousStep(...args))\n  }, [..._hoisted_5])) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"span\", _hoisted_6, \"Passaggio \" + _toDisplayString($setup.currentStep) + \" di 2\", 1 /* TEXT */), _hoisted_7, _createElementVNode(\"form\", {\n    onSubmit: _cache[5] || (_cache[5] = _withModifiers((...args) => $setup.onSubmit && $setup.onSubmit(...args), [\"prevent\"]))\n  }, [_createCommentVNode(\" Step 1: Email \"), $setup.currentStep === 1 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [_createElementVNode(\"div\", _hoisted_9, [_hoisted_10, _withDirectives(_createElementVNode(\"input\", {\n    id: \"email\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.form.email = $event),\n    type: \"email\",\n    class: _normalizeClass([\"form-control\", {\n      'is-invalid': $setup.errors.email\n    }]),\n    required: \"\"\n  }, null, 2 /* CLASS */), [[_vModelText, $setup.form.email]]), _createElementVNode(\"div\", _hoisted_11, _toDisplayString($setup.errors.email), 1 /* TEXT */)])])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Step 2: Password \"), $setup.currentStep === 2 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_12, [_createElementVNode(\"div\", _hoisted_13, [_hoisted_14, _withDirectives(_createElementVNode(\"input\", {\n    id: \"password\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.form.password = $event),\n    type: \"password\",\n    class: _normalizeClass([\"form-control\", {\n      'is-invalid': $setup.errors.password\n    }]),\n    required: \"\"\n  }, null, 2 /* CLASS */), [[_vModelText, $setup.form.password]]), _createElementVNode(\"div\", _hoisted_15, _toDisplayString($setup.errors.password), 1 /* TEXT */)]), _createElementVNode(\"div\", _hoisted_16, [_withDirectives(_createElementVNode(\"input\", {\n    id: \"rememberMe\",\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $setup.form.rememberMe = $event),\n    type: \"checkbox\",\n    class: \"form-check-input\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelCheckbox, $setup.form.rememberMe]]), _hoisted_17])])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Bottone di avanzamento o submit \"), $setup.currentStep < 2 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_18, [_createElementVNode(\"button\", {\n    type: \"button\",\n    class: \"btn btn-primary btn-next\",\n    disabled: !$setup.isStepValid($setup.currentStep),\n    onClick: _cache[4] || (_cache[4] = (...args) => $setup.goToNextStep && $setup.goToNextStep(...args))\n  }, \" Avanti \", 8 /* PROPS */, _hoisted_19)])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" Bottone submit al secondo step \"), $setup.currentStep === 2 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_20, [..._hoisted_22])) : _createCommentVNode(\"v-if\", true)], 32 /* NEED_HYDRATION */)])]);\n}","map":{"version":3,"names":["_imports_0","class","_createElementVNode","src","alt","_hoisted_4","key","for","type","_hoisted_21","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","$setup","currentStep","onClick","_cache","args","goToPreviousStep","_hoisted_5","_createCommentVNode","_hoisted_6","_toDisplayString","_hoisted_7","onSubmit","_withModifiers","_hoisted_8","_hoisted_9","_hoisted_10","id","$event","form","email","_normalizeClass","errors","required","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","password","_hoisted_15","_hoisted_16","rememberMe","_hoisted_17","_hoisted_18","disabled","isStepValid","goToNextStep","_hoisted_19","_hoisted_20","_hoisted_22"],"sources":["/Users/alessandromagnani/Desktop/Università/applicazioni-e-servizi-web/osteoarthritis-project/frontend/src/components/UserLogin.vue"],"sourcesContent":["<template>\n  <div class=\"login\">\n    <div class=\"container mt-5\">\n      <div class=\"header\">\n        <button\n          v-if=\"currentStep > 1\"\n          class=\"back-button\"\n          @click=\"goToPreviousStep\"\n        >\n          <img src=\"@/assets/back-icon.svg\" alt=\"Indietro\" class=\"back-icon\" />\n        </button>\n      </div>\n\n      <span class=\"step-title\">Passaggio {{ currentStep }} di 2</span>\n      <h2 class=\"mb-4\">Login al tuo Account</h2>\n\n      <form @submit.prevent=\"onSubmit\">\n        <!-- Step 1: Email -->\n        <div v-if=\"currentStep === 1\">\n          <div class=\"mb-3\">\n            <label for=\"email\" class=\"form-label\">Email</label>\n            <input\n              id=\"email\"\n              v-model=\"form.email\"\n              type=\"email\"\n              class=\"form-control\"\n              :class=\"{ 'is-invalid': errors.email }\"\n              required\n            />\n            <div class=\"invalid-feedback\">{{ errors.email }}</div>\n          </div>\n        </div>\n\n        <!-- Step 2: Password -->\n        <div v-if=\"currentStep === 2\">\n          <div class=\"mb-3\">\n            <label for=\"password\" class=\"form-label\">Password</label>\n            <input\n              id=\"password\"\n              v-model=\"form.password\"\n              type=\"password\"\n              class=\"form-control\"\n              :class=\"{ 'is-invalid': errors.password }\"\n              required\n            />\n            <div class=\"invalid-feedback\">{{ errors.password }}</div>\n          </div>\n          <div class=\"mb-3 form-check\">\n            <input\n              id=\"rememberMe\"\n              v-model=\"form.rememberMe\"\n              type=\"checkbox\"\n              class=\"form-check-input\"\n            />\n            <label for=\"rememberMe\" class=\"form-check-label\">Remember Me</label>\n          </div>\n        </div>\n\n        <!-- Bottone di avanzamento o submit -->\n        <div v-if=\"currentStep < 2\">\n          <button\n            type=\"button\"\n            class=\"btn btn-primary btn-next\"\n            :disabled=\"!isStepValid(currentStep)\"\n            @click=\"goToNextStep\"\n          >\n            Avanti\n          </button>\n        </div>\n\n        <!-- Bottone submit al secondo step -->\n        <div v-if=\"currentStep === 2\">\n          <button type=\"submit\" class=\"btn btn-primary\">Login</button>\n        </div>\n      </form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport { Auth } from \"@aws-amplify/auth\";\n\nexport default {\n  name: \"UserLogin\",\n  setup() {\n    // Stato del form\n    const form = ref({\n      email: \"\",\n      password: \"\",\n      rememberMe: false,\n    });\n\n    // Stato degli errori\n    const errors = ref({\n      email: \"\",\n      password: \"\",\n    });\n\n    const currentStep = ref(1); // Step iniziale\n    const router = useRouter();\n\n    // Funzione per validare il form\n    const validateForm = () => {\n      if (currentStep.value === 1) {\n        errors.value.email = form.value.email ? \"\" : \"Email richiesta\";\n      } else if (currentStep.value === 2) {\n        errors.value.password = form.value.password ? \"\" : \"Password richiesta\";\n      }\n      return Object.values(errors.value).every((error) => !error);\n    };\n\n    // Funzione per gestire il submit del form\n    const onSubmit = async () => {\n      if (!validateForm()) return;\n\n      try {\n        // Effettua il login con AWS Cognito\n        const user = await Auth.signIn(form.value.email, form.value.password);\n        alert(\"Login eseguito! Benvenuto \" + user.username);\n\n        // Naviga alla pagina di benvenuto\n        router.push({\n          name: \"Welcome\",\n          query: { username: form.value.email },\n        });\n      } catch (error) {\n        console.error(\"Errore di login:\", error);\n        alert(`Errore di login: ${error.message || error}`);\n      }\n    };\n\n    // Navigazione tra step\n    const goToNextStep = () => {\n      if (validateForm()) currentStep.value++;\n    };\n\n    const goToPreviousStep = () => {\n      currentStep.value--;\n    };\n\n    // Controlla se lo step corrente è valido\n    const isStepValid = (step) => {\n      if (step === 1) {\n        return !!form.value.email;\n      } else if (step === 2) {\n        return !!form.value.password;\n      }\n      return false;\n    };\n\n    return {\n      form,\n      onSubmit,\n      errors,\n      currentStep,\n      goToNextStep,\n      goToPreviousStep,\n      isStepValid,\n    };\n  },\n};\n</script>\n\n<style scoped>\n.login {\n  background: linear-gradient(135deg, #f7f7f7, #e0e0e0);\n  min-height: 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.container {\n  max-width: 600px;\n  padding: 40px;\n  border-radius: 15px;\n  background: #ffffff;\n  box-shadow: 0 12px 24px rgba(0, 0, 0, 0.1);\n  animation: slideIn 1s ease-out;\n}\n\nh2 {\n  font-size: 18px;\n  color: #343a40;\n}\n\n.form-label {\n  color: #495057;\n}\n\n.invalid-feedback {\n  color: #dc3545;\n}\n\n.btn {\n  margin-top: 20px;\n  background-color: #007bff;\n  border: none;\n}\n\n.btn-next {\n  width: 100%;\n  padding: 10px;\n}\n\n.back-button {\n  background: transparent;\n  border: none;\n  cursor: pointer;\n}\n\n.back-icon {\n  width: 30px;\n}\n\n.step-title {\n  font-size: 12px;\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}