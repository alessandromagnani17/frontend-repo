{"ast":null,"code":"import axios from \"axios\"; // Importa axios\n\nexport default {\n  data() {\n    return {\n      currentStep: 1,\n      loading: false,\n      errors: {},\n      form: {\n        confirmationCode: \"\"\n      },\n      email: this.$route.params.email // Passato tramite router da UserRegister\n    };\n  },\n  methods: {\n    async onSubmit() {\n      this.loading = true;\n      this.errors = {};\n      console.log(\"Inizio invio dati...\");\n      const requestData = {\n        email: this.email,\n        confirmation_code: this.form.confirmationCode // Assicurati che il campo sia 'confirmation_code'\n      };\n      console.log(\"Dati inviati:\", requestData);\n      try {\n        const response = await axios.post(\"http://127.0.0.1:5000/confirm\", requestData);\n        if (response.status === 200 && response.data.message === \"Email confirmed successfully.\") {\n          alert(\"Successo: Email confermata.\");\n          console.log(\"Risposta del server:\", response.data);\n          this.loading = false;\n          this.$router.push(\"/login\"); // Reindirizza l'utente alla pagina di login\n        } else {\n          alert(\"Errore nella conferma: \" + response.data.error || \"Errore sconosciuto\");\n          this.errors.general = \"Errore nella conferma del codice.\";\n          this.loading = false;\n          console.log(\"Errore risposta:\", response.data);\n        }\n      } catch (error) {\n        console.error(\"Errore di conferma:\", error);\n        this.errors.general = error.response?.data?.message || \"Errore nella conferma\";\n        this.loading = false;\n        alert(\"Errore: \" + error.message); // Mostra l'errore dettagliato\n      }\n    },\n    isStepValid() {\n      return this.form.confirmationCode.length > 0; // Verifica se il codice di conferma è presente\n    }\n  }\n};","map":{"version":3,"names":["axios","data","currentStep","loading","errors","form","confirmationCode","email","$route","params","methods","onSubmit","console","log","requestData","confirmation_code","response","post","status","message","alert","$router","push","error","general","isStepValid","length"],"sources":["/Users/alessandromagnani/Desktop/Università/applicazioni-e-servizi-web/osteoarthritis-project/frontend/src/components/EmailConfirmation.vue"],"sourcesContent":["<template>\n  <div class=\"register\">\n    <div class=\"container mt-5\">\n      <div class=\"header\">\n        <button\n          v-if=\"currentStep > 1\"\n          class=\"back-button\"\n          @click=\"goToPreviousStep\"\n        >\n          <img src=\"@/assets/back-icon.svg\" alt=\"Indietro\" class=\"back-icon\" />\n        </button>\n      </div>\n\n      <span class=\"step-title\">Passaggio {{ currentStep }} di 1</span>\n      <h2 class=\"mb-4\">Conferma il tuo Account</h2>\n\n      <form @submit.prevent=\"onSubmit\">\n        <!-- Step 1: Codice di Conferma -->\n        <div v-if=\"currentStep === 1\">\n          <div class=\"mb-3\">\n            <label for=\"confirmationCode\" class=\"form-label\"\n              >Codice di conferma</label\n            >\n            <input\n              id=\"confirmationCode\"\n              v-model=\"form.confirmationCode\"\n              type=\"text\"\n              class=\"form-control\"\n              required\n            />\n          </div>\n        </div>\n\n        <!-- Bottone di avanzamento o submit -->\n        <div v-if=\"currentStep < 1\">\n          <button\n            type=\"submit\"\n            class=\"btn btn-primary btn-next\"\n            :disabled=\"!isStepValid(currentStep)\"\n            @click=\"goToNextStep\"\n          >\n            Conferma\n          </button>\n        </div>\n\n        <!-- Submit button (Step 1) -->\n        <div v-if=\"currentStep === 1\">\n          <button\n            type=\"submit\"\n            class=\"btn btn-primary btn-next\"\n            :disabled=\"loading || !isStepValid(currentStep)\"\n          >\n            <span v-if=\"loading\">Conferma...</span>\n            <span v-else>Conferma il Codice</span>\n          </button>\n\n          <!-- Error message -->\n          <div v-if=\"errors.general\" class=\"invalid-feedback mt-3\">\n            {{ errors.general }}\n          </div>\n        </div>\n      </form>\n    </div>\n\n    <!-- Loading overlay -->\n    <div v-if=\"loading\" class=\"loading-overlay\">\n      <div class=\"loading-icon\">\n        <img src=\"@/assets/loading-icon.svg\" alt=\"Loading...\" />\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\"; // Importa axios\n\nexport default {\n  data() {\n    return {\n      currentStep: 1,\n      loading: false,\n      errors: {},\n      form: {\n        confirmationCode: \"\",\n      },\n      email: this.$route.params.email, // Passato tramite router da UserRegister\n    };\n  },\n  methods: {\n    async onSubmit() {\n      this.loading = true;\n      this.errors = {};\n      console.log(\"Inizio invio dati...\");\n\n      const requestData = {\n        email: this.email,\n        confirmation_code: this.form.confirmationCode, // Assicurati che il campo sia 'confirmation_code'\n      };\n\n      console.log(\"Dati inviati:\", requestData);\n\n      try {\n        const response = await axios.post(\n          \"http://127.0.0.1:5000/confirm\",\n          requestData\n        );\n\n        if (\n          response.status === 200 &&\n          response.data.message === \"Email confirmed successfully.\"\n        ) {\n          alert(\"Successo: Email confermata.\");\n          console.log(\"Risposta del server:\", response.data);\n          this.loading = false;\n          this.$router.push(\"/login\"); // Reindirizza l'utente alla pagina di login\n        } else {\n          alert(\n            \"Errore nella conferma: \" + response.data.error ||\n              \"Errore sconosciuto\"\n          );\n          this.errors.general = \"Errore nella conferma del codice.\";\n          this.loading = false;\n          console.log(\"Errore risposta:\", response.data);\n        }\n      } catch (error) {\n        console.error(\"Errore di conferma:\", error);\n        this.errors.general =\n          error.response?.data?.message || \"Errore nella conferma\";\n        this.loading = false;\n        alert(\"Errore: \" + error.message); // Mostra l'errore dettagliato\n      }\n    },\n    isStepValid() {\n      return this.form.confirmationCode.length > 0; // Verifica se il codice di conferma è presente\n    },\n  },\n};\n</script>\n\n<style scoped>\n/* Lo stile è lo stesso della pagina di registrazione */\n.register {\n  background: #ffffff; /* Sfondo bianco */\n  min-height: 100vh;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  box-shadow: 0 0px 0px rgba(0, 0, 0, 0);\n}\n\n.container {\n  max-width: 600px;\n  padding: 40px;\n  border-radius: 15px;\n  background: #ffffff;\n  box-shadow: 0 12px 24px rgba(0, 0, 0, 0.1);\n  margin-top: 100px;\n  height: auto;\n}\n\n.header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 20px;\n}\n\n.back-button {\n  background: transparent;\n  border: none;\n  cursor: pointer;\n  margin-left: -10px;\n}\n\n.back-icon {\n  width: 30px;\n  height: 30px;\n}\n\n.step-title {\n  font-size: 10px;\n  margin-bottom: 10px;\n}\n\nh2 {\n  font-size: 18px;\n  margin-bottom: 30px;\n}\n\n.form-label {\n  font-size: 12px;\n}\n\n.form-control {\n  background: #f2f2f2;\n  border: 1px solid #ccc;\n  border-radius: 5px;\n  font-size: 12px;\n}\n\n.input-group {\n  position: relative;\n}\n\n.btn-next {\n  width: 100%;\n  margin-top: 20px;\n  padding: 10px;\n  cursor: pointer;\n}\n\n.btn-next:hover {\n  background-color: #c0c0c0;\n}\n\n.loading-overlay {\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: rgba(255, 255, 255, 0.8);\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: 9999;\n}\n\n.loading-icon {\n  width: 50px;\n}\n</style>\n"],"mappings":"AA0EA,OAAOA,KAAI,MAAO,OAAO,EAAE;;AAE3B,eAAe;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,WAAW,EAAE,CAAC;MACdC,OAAO,EAAE,KAAK;MACdC,MAAM,EAAE,CAAC,CAAC;MACVC,IAAI,EAAE;QACJC,gBAAgB,EAAE;MACpB,CAAC;MACDC,KAAK,EAAE,IAAI,CAACC,MAAM,CAACC,MAAM,CAACF,KAAK,CAAE;IACnC,CAAC;EACH,CAAC;EACDG,OAAO,EAAE;IACP,MAAMC,QAAQA,CAAA,EAAG;MACf,IAAI,CAACR,OAAM,GAAI,IAAI;MACnB,IAAI,CAACC,MAAK,GAAI,CAAC,CAAC;MAChBQ,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAC;MAEnC,MAAMC,WAAU,GAAI;QAClBP,KAAK,EAAE,IAAI,CAACA,KAAK;QACjBQ,iBAAiB,EAAE,IAAI,CAACV,IAAI,CAACC,gBAAgB,CAAE;MACjD,CAAC;MAEDM,OAAO,CAACC,GAAG,CAAC,eAAe,EAAEC,WAAW,CAAC;MAEzC,IAAI;QACF,MAAME,QAAO,GAAI,MAAMhB,KAAK,CAACiB,IAAI,CAC/B,+BAA+B,EAC/BH,WACF,CAAC;QAED,IACEE,QAAQ,CAACE,MAAK,KAAM,GAAE,IACtBF,QAAQ,CAACf,IAAI,CAACkB,OAAM,KAAM,+BAA8B,EACxD;UACAC,KAAK,CAAC,6BAA6B,CAAC;UACpCR,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAEG,QAAQ,CAACf,IAAI,CAAC;UAClD,IAAI,CAACE,OAAM,GAAI,KAAK;UACpB,IAAI,CAACkB,OAAO,CAACC,IAAI,CAAC,QAAQ,CAAC,EAAE;QAC/B,OAAO;UACLF,KAAK,CACH,yBAAwB,GAAIJ,QAAQ,CAACf,IAAI,CAACsB,KAAI,IAC5C,oBACJ,CAAC;UACD,IAAI,CAACnB,MAAM,CAACoB,OAAM,GAAI,mCAAmC;UACzD,IAAI,CAACrB,OAAM,GAAI,KAAK;UACpBS,OAAO,CAACC,GAAG,CAAC,kBAAkB,EAAEG,QAAQ,CAACf,IAAI,CAAC;QAChD;MACF,EAAE,OAAOsB,KAAK,EAAE;QACdX,OAAO,CAACW,KAAK,CAAC,qBAAqB,EAAEA,KAAK,CAAC;QAC3C,IAAI,CAACnB,MAAM,CAACoB,OAAM,GAChBD,KAAK,CAACP,QAAQ,EAAEf,IAAI,EAAEkB,OAAM,IAAK,uBAAuB;QAC1D,IAAI,CAAChB,OAAM,GAAI,KAAK;QACpBiB,KAAK,CAAC,UAAS,GAAIG,KAAK,CAACJ,OAAO,CAAC,EAAE;MACrC;IACF,CAAC;IACDM,WAAWA,CAAA,EAAG;MACZ,OAAO,IAAI,CAACpB,IAAI,CAACC,gBAAgB,CAACoB,MAAK,GAAI,CAAC,EAAE;IAChD;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}