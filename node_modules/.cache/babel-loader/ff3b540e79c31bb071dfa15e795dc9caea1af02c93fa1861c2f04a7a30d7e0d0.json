{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, withModifiers as _withModifiers, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\nconst _withScopeId = n => (_pushScopeId(\"data-v-7874be84\"), n = n(), _popScopeId(), n);\nconst _hoisted_1 = {\n  class: \"register\"\n};\nconst _hoisted_2 = {\n  class: \"container mt-5\"\n};\nconst _hoisted_3 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"h2\", {\n  class: \"mb-4\"\n}, \"Create Your Account\", -1 /* HOISTED */));\nconst _hoisted_4 = {\n  class: \"mb-3\"\n};\nconst _hoisted_5 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"username\",\n  class: \"form-label\"\n}, \"Username (Email)\", -1 /* HOISTED */));\nconst _hoisted_6 = {\n  key: 0,\n  class: \"invalid-feedback\"\n};\nconst _hoisted_7 = {\n  class: \"mb-3\"\n};\nconst _hoisted_8 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"password\",\n  class: \"form-label\"\n}, \"Password\", -1 /* HOISTED */));\nconst _hoisted_9 = {\n  key: 0,\n  class: \"invalid-feedback\"\n};\nconst _hoisted_10 = [\"disabled\"];\nconst _hoisted_11 = {\n  key: 0\n};\nconst _hoisted_12 = {\n  key: 1\n};\nconst _hoisted_13 = {\n  key: 0,\n  class: \"invalid-feedback mt-3\"\n};\nconst _hoisted_14 = [\"disabled\"];\nconst _hoisted_15 = {\n  key: 0\n};\nconst _hoisted_16 = {\n  key: 1\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_hoisted_3, _createElementVNode(\"form\", {\n    onSubmit: _cache[2] || (_cache[2] = _withModifiers((...args) => $options.onSubmit && $options.onSubmit(...args), [\"prevent\"]))\n  }, [_createElementVNode(\"div\", _hoisted_4, [_hoisted_5, _withDirectives(_createElementVNode(\"input\", {\n    id: \"username\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.form.username = $event),\n    type: \"email\",\n    class: \"form-control\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.form.username]]), $data.errors.username ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, _toDisplayString($data.errors.username), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", _hoisted_7, [_hoisted_8, _withDirectives(_createElementVNode(\"input\", {\n    id: \"password\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.form.password = $event),\n    type: \"password\",\n    class: \"form-control\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.form.password]]), $data.errors.password ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, _toDisplayString($data.errors.password), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"button\", {\n    type: \"submit\",\n    class: \"btn btn-primary\",\n    disabled: $data.loading\n  }, [$data.loading ? (_openBlock(), _createElementBlock(\"span\", _hoisted_11, \"Registering...\")) : (_openBlock(), _createElementBlock(\"span\", _hoisted_12, \"Register\"))], 8 /* PROPS */, _hoisted_10), $data.errors.general ? (_openBlock(), _createElementBlock(\"div\", _hoisted_13, _toDisplayString($data.errors.general), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)], 32 /* NEED_HYDRATION */), _createElementVNode(\"button\", {\n    class: \"btn btn-secondary mt-3\",\n    disabled: $data.loading,\n    onClick: _cache[3] || (_cache[3] = (...args) => $options.signInWithProvider && $options.signInWithProvider(...args))\n  }, [$data.loading ? (_openBlock(), _createElementBlock(\"span\", _hoisted_15, \"Loading...\")) : (_openBlock(), _createElementBlock(\"span\", _hoisted_16, \"Login with OAuth\"))], 8 /* PROPS */, _hoisted_14)])]);\n}","map":{"version":3,"names":["class","_createElementVNode","for","key","_createElementBlock","_hoisted_1","_hoisted_2","_hoisted_3","onSubmit","_cache","_withModifiers","args","$options","_hoisted_4","_hoisted_5","id","$event","$data","form","username","type","required","errors","_hoisted_6","_toDisplayString","_createCommentVNode","_hoisted_7","_hoisted_8","password","_hoisted_9","disabled","loading","_hoisted_11","_hoisted_12","_hoisted_10","general","_hoisted_13","onClick","signInWithProvider","_hoisted_15","_hoisted_16","_hoisted_14"],"sources":["/Users/alessandromagnani/Desktop/UniversitaÌ€/applicazioni-e-servizi-web/osteoarthritis-project/frontend/src/components/UserRegister.vue"],"sourcesContent":["<template>\n  <div class=\"register\">\n    <div class=\"container mt-5\">\n      <h2 class=\"mb-4\">Create Your Account</h2>\n      <form @submit.prevent=\"onSubmit\">\n        <div class=\"mb-3\">\n          <label for=\"username\" class=\"form-label\">Username (Email)</label>\n          <input\n            id=\"username\"\n            v-model=\"form.username\"\n            type=\"email\"\n            class=\"form-control\"\n            required\n          />\n          <div v-if=\"errors.username\" class=\"invalid-feedback\">\n            {{ errors.username }}\n          </div>\n        </div>\n        <div class=\"mb-3\">\n          <label for=\"password\" class=\"form-label\">Password</label>\n          <input\n            id=\"password\"\n            v-model=\"form.password\"\n            type=\"password\"\n            class=\"form-control\"\n            required\n          />\n          <div v-if=\"errors.password\" class=\"invalid-feedback\">\n            {{ errors.password }}\n          </div>\n        </div>\n        <button type=\"submit\" class=\"btn btn-primary\" :disabled=\"loading\">\n          <span v-if=\"loading\">Registering...</span>\n          <span v-else>Register</span>\n        </button>\n        <div v-if=\"errors.general\" class=\"invalid-feedback mt-3\">\n          {{ errors.general }}\n        </div>\n      </form>\n      <button\n        class=\"btn btn-secondary mt-3\"\n        :disabled=\"loading\"\n        @click=\"signInWithProvider\"\n      >\n        <span v-if=\"loading\">Loading...</span>\n        <span v-else>Login with OAuth</span>\n      </button>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { Auth } from \"aws-amplify\"; // Assicurati che Auth sia correttamente importato\n\nexport default {\ndata() {\n  return {\n    form: {\n      username: \"\",\n      password: \"\",\n    },\n    errors: {},\n    loading: false, // Aggiunto per il caricamento\n  };\n},\nmethods: {\n  // Metodo per gestire la registrazione dell'utente\n  async onSubmit() {\n    this.loading = true; // Avvia il caricamento\n    console.log(\"onSubmit called\"); // Debug\n\n    try {\n      const { username, password } = this.form;\n      console.log(\"Form Data:\", this.form); // Visualizza i dati del form\n\n      // Esegui la registrazione con AWS Cognito usando Auth.signUp\n      const signUpResponse = await Auth.signUp({\n        username,\n        password,\n        attributes: {\n          email: username, // Corretto l'attributo email\n        },\n      });\n\n      console.log(\"Sign up response:\", signUpResponse); // Visualizza la risposta della registrazione\n      alert(\n        \"Registration successful! Please check your email for verification.\"\n      );\n      this.errors = {}; // Resetta gli errori dopo il successo\n    } catch (error) {\n      console.error(\"Error signing up:\", error);\n      alert(\"Error signing up: \" + error.message); // Mostra un alert per l'errore\n\n      // Gestione degli errori di Cognito\n      if (error.code === \"UsernameExistsException\") {\n        this.errors.username = \"Username already exists.\";\n        alert(\"Username already exists.\"); // Mostra un alert per l'errore specifico\n      } else {\n        this.errors.general = error.message; // Imposta l'errore generale\n        alert(\"Error: \" + error.message); // Mostra un alert per l'errore generale\n      }\n    } finally {\n      this.loading = false; // Fine del caricamento\n      console.log(\"Loading finished\"); // Debug\n    }\n  },\n  // Metodo per l'accesso con provider OAuth\n  async signInWithProvider() {\n    this.loading = true; // Inizia il caricamento\n    console.log(\"signInWithProvider called\"); // Debug\n\n    try {\n      console.log(\"Calling Auth.federatedSignIn()\"); // Debug\n      await Auth.federatedSignIn(); // Avvia il processo di accesso federato\n    } catch (error) {\n      console.error(\"Error during federated sign in:\", error);\n      this.errors.general = \"Error during OAuth login.\"; // Errore generale\n      alert(\"Error during OAuth login: \" + error.message); // Mostra un alert per l'errore\n    } finally {\n      this.loading = false; // Fine del caricamento\n      console.log(\"Loading finished for federated sign in\"); // Debug\n    }\n  },\n},\n};\n</script>\n\n<style scoped>\n.register {\nbackground: linear-gradient(135deg, #f7f7f7, #e0e0e0);\nmin-height: 100vh;\ndisplay: flex;\nalign-items: center;\njustify-content: center;\n}\n\n.container {\nmax-width: 600px;\npadding: 40px;\nborder-radius: 15px;\nbackground: #ffffff;\nbox-shadow: 0 12px 24px rgba(0, 0, 0, 0.1);\n}\n\nh2 {\nfont-size: 2.5rem;\ncolor: #343a40;\n}\n\n.form-label {\ncolor: #495057;\n}\n\n.invalid-feedback {\ncolor: #dc3545;\n}\n\n.btn {\nmargin-top: 20px;\nbackground-color: #007bff;\nborder: none;\ntransition: background-color 0.3s, transform 0.3s;\n}\n\n.btn:hover {\nbackground-color: #0056b3;\ntransform: scale(1.05);\n}\n</style>\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}