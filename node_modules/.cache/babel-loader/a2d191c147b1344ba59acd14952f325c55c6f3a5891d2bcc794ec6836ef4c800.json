{"ast":null,"code":"import axios from \"axios\";\nexport default {\n  data() {\n    return {\n      currentStep: 1,\n      loading: false,\n      errors: {},\n      form: {\n        confirmationCode: \"\"\n      },\n      email: this.$route.params.email\n    };\n  },\n  methods: {\n    async onSubmit() {\n      this.loading = true;\n      this.errors = {};\n      console.log(\"Inizio invio dati...\");\n      const requestData = {\n        email: this.email,\n        confirmation_code: this.form.confirmationCode\n      };\n      console.log(\"Dati inviati:\", requestData);\n      try {\n        const response = await axios.post(\"http://127.0.0.1:5000/confirm\", requestData);\n        console.log(\"Risposta del server:\", response.data);\n        if (response.data.message === \"Email confirmed successfully.\") {\n          alert(\"Successo: Email confermata.\");\n          this.$router.push(\"/login\");\n        } else {\n          this.handleError(response.data.error || \"Errore sconosciuto\");\n        }\n      } catch (error) {\n        console.error(\"Errore di conferma:\", error);\n        if (error.response) {\n          console.error(\"Dati della risposta di errore:\", error.response.data);\n          this.handleError(error.response.data.message || error.response.data.error || \"Errore nella conferma\");\n        } else {\n          this.handleError(\"Errore di rete. Verifica la tua connessione.\");\n        }\n      } finally {\n        this.loading = false;\n      }\n    },\n    handleError(errorMessage) {\n      this.errors.general = errorMessage;\n      alert(\"Errore: \" + errorMessage);\n    },\n    isStepValid() {\n      return this.form.confirmationCode.length > 0;\n    }\n  }\n};","map":{"version":3,"names":["axios","data","currentStep","loading","errors","form","confirmationCode","email","$route","params","methods","onSubmit","console","log","requestData","confirmation_code","response","post","message","alert","$router","push","handleError","error","errorMessage","general","isStepValid","length"],"sources":["C:\\Users\\Utente\\Desktop\\osteoarthritis-project\\frontend\\src\\components\\EmailConfirmation.vue"],"sourcesContent":["<template>\r\n  <div class=\"register\">\r\n    <div class=\"container mt-5\">\r\n      <div class=\"header\">\r\n        <button\r\n          v-if=\"currentStep > 1\"\r\n          class=\"back-button\"\r\n          @click=\"goToPreviousStep\"\r\n        >\r\n          <img src=\"@/assets/back-icon.svg\" alt=\"Indietro\" class=\"back-icon\" />\r\n        </button>\r\n      </div>\r\n\r\n      <span class=\"step-title\">Passaggio {{ currentStep }} di 1</span>\r\n      <h2 class=\"mb-4\">Conferma il tuo Account</h2>\r\n\r\n      <form @submit.prevent=\"onSubmit\">\r\n        <div v-if=\"currentStep === 1\">\r\n          <div class=\"mb-3\">\r\n            <label for=\"confirmationCode\" class=\"form-label\"\r\n              >Codice di conferma</label\r\n            >\r\n            <input\r\n              id=\"confirmationCode\"\r\n              v-model=\"form.confirmationCode\"\r\n              type=\"text\"\r\n              class=\"form-control\"\r\n              required\r\n            />\r\n          </div>\r\n        </div>\r\n\r\n        <div v-if=\"currentStep === 1\">\r\n          <button\r\n            type=\"submit\"\r\n            class=\"btn btn-primary btn-next\"\r\n            :disabled=\"loading || !isStepValid(currentStep)\"\r\n          >\r\n            <span v-if=\"loading\">Conferma...</span>\r\n            <span v-else>Conferma il Codice</span>\r\n          </button>\r\n\r\n          <div v-if=\"errors.general\" class=\"invalid-feedback mt-3\">\r\n            {{ errors.general }}\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </div>\r\n\r\n    <div v-if=\"loading\" class=\"loading-overlay\">\r\n      <div class=\"loading-icon\">\r\n        <img src=\"@/assets/loading-icon.svg\" alt=\"Loading...\" />\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from \"axios\";\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      currentStep: 1,\r\n      loading: false,\r\n      errors: {},\r\n      form: {\r\n        confirmationCode: \"\",\r\n      },\r\n      email: this.$route.params.email,\r\n    };\r\n  },\r\n  methods: {\r\n    async onSubmit() {\r\n      this.loading = true;\r\n      this.errors = {};\r\n      console.log(\"Inizio invio dati...\");\r\n\r\n      const requestData = {\r\n        email: this.email,\r\n        confirmation_code: this.form.confirmationCode,\r\n      };\r\n\r\n      console.log(\"Dati inviati:\", requestData);\r\n\r\n      try {\r\n        const response = await axios.post(\r\n          \"http://127.0.0.1:5000/confirm\",\r\n          requestData\r\n        );\r\n\r\n        console.log(\"Risposta del server:\", response.data);\r\n\r\n        if (response.data.message === \"Email confirmed successfully.\") {\r\n          alert(\"Successo: Email confermata.\");\r\n          this.$router.push(\"/login\");\r\n        } else {\r\n          this.handleError(response.data.error || \"Errore sconosciuto\");\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Errore di conferma:\", error);\r\n        if (error.response) {\r\n          console.error(\"Dati della risposta di errore:\", error.response.data);\r\n          this.handleError(\r\n            error.response.data.message ||\r\n              error.response.data.error ||\r\n              \"Errore nella conferma\"\r\n          );\r\n        } else {\r\n          this.handleError(\"Errore di rete. Verifica la tua connessione.\");\r\n        }\r\n      } finally {\r\n        this.loading = false;\r\n      }\r\n    },\r\n    handleError(errorMessage) {\r\n      this.errors.general = errorMessage;\r\n      alert(\"Errore: \" + errorMessage);\r\n    },\r\n    isStepValid() {\r\n      return this.form.confirmationCode.length > 0;\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n/* Lo stile Ã¨ lo stesso della pagina di registrazione */\r\n.register {\r\n  background: #ffffff; /* Sfondo bianco */\r\n  min-height: 100vh;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  box-shadow: 0 0px 0px rgba(0, 0, 0, 0);\r\n}\r\n\r\n.container {\r\n  max-width: 600px;\r\n  padding: 40px;\r\n  border-radius: 15px;\r\n  background: #ffffff;\r\n  box-shadow: 0 12px 24px rgba(0, 0, 0, 0.1);\r\n  margin-top: 100px;\r\n  height: auto;\r\n}\r\n\r\n.header {\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n  margin-bottom: 20px;\r\n}\r\n\r\n.back-button {\r\n  background: transparent;\r\n  border: none;\r\n  cursor: pointer;\r\n  margin-left: -10px;\r\n}\r\n\r\n.back-icon {\r\n  width: 30px;\r\n  height: 30px;\r\n}\r\n\r\n.step-title {\r\n  font-size: 10px;\r\n  margin-bottom: 10px;\r\n}\r\n\r\nh2 {\r\n  font-size: 18px;\r\n  margin-bottom: 30px;\r\n}\r\n\r\n.form-label {\r\n  font-size: 12px;\r\n}\r\n\r\n.form-control {\r\n  background: #f2f2f2;\r\n  border: 1px solid #ccc;\r\n  border-radius: 5px;\r\n  font-size: 12px;\r\n}\r\n\r\n.input-group {\r\n  position: relative;\r\n}\r\n\r\n.btn-next {\r\n  width: 100%;\r\n  margin-top: 20px;\r\n  padding: 10px;\r\n  cursor: pointer;\r\n}\r\n\r\n.btn-next:hover {\r\n  background-color: #c0c0c0;\r\n}\r\n\r\n.loading-overlay {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background: rgba(255, 255, 255, 0.8);\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  z-index: 9999;\r\n}\r\n\r\n.loading-icon {\r\n  width: 50px;\r\n}\r\n</style>\r\n"],"mappings":"AA0DA,OAAOA,KAAI,MAAO,OAAO;AAEzB,eAAe;EACbC,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,WAAW,EAAE,CAAC;MACdC,OAAO,EAAE,KAAK;MACdC,MAAM,EAAE,CAAC,CAAC;MACVC,IAAI,EAAE;QACJC,gBAAgB,EAAE;MACpB,CAAC;MACDC,KAAK,EAAE,IAAI,CAACC,MAAM,CAACC,MAAM,CAACF;IAC5B,CAAC;EACH,CAAC;EACDG,OAAO,EAAE;IACP,MAAMC,QAAQA,CAAA,EAAG;MACf,IAAI,CAACR,OAAM,GAAI,IAAI;MACnB,IAAI,CAACC,MAAK,GAAI,CAAC,CAAC;MAChBQ,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAC;MAEnC,MAAMC,WAAU,GAAI;QAClBP,KAAK,EAAE,IAAI,CAACA,KAAK;QACjBQ,iBAAiB,EAAE,IAAI,CAACV,IAAI,CAACC;MAC/B,CAAC;MAEDM,OAAO,CAACC,GAAG,CAAC,eAAe,EAAEC,WAAW,CAAC;MAEzC,IAAI;QACF,MAAME,QAAO,GAAI,MAAMhB,KAAK,CAACiB,IAAI,CAC/B,+BAA+B,EAC/BH,WACF,CAAC;QAEDF,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAEG,QAAQ,CAACf,IAAI,CAAC;QAElD,IAAIe,QAAQ,CAACf,IAAI,CAACiB,OAAM,KAAM,+BAA+B,EAAE;UAC7DC,KAAK,CAAC,6BAA6B,CAAC;UACpC,IAAI,CAACC,OAAO,CAACC,IAAI,CAAC,QAAQ,CAAC;QAC7B,OAAO;UACL,IAAI,CAACC,WAAW,CAACN,QAAQ,CAACf,IAAI,CAACsB,KAAI,IAAK,oBAAoB,CAAC;QAC/D;MACF,EAAE,OAAOA,KAAK,EAAE;QACdX,OAAO,CAACW,KAAK,CAAC,qBAAqB,EAAEA,KAAK,CAAC;QAC3C,IAAIA,KAAK,CAACP,QAAQ,EAAE;UAClBJ,OAAO,CAACW,KAAK,CAAC,gCAAgC,EAAEA,KAAK,CAACP,QAAQ,CAACf,IAAI,CAAC;UACpE,IAAI,CAACqB,WAAW,CACdC,KAAK,CAACP,QAAQ,CAACf,IAAI,CAACiB,OAAM,IACxBK,KAAK,CAACP,QAAQ,CAACf,IAAI,CAACsB,KAAI,IACxB,uBACJ,CAAC;QACH,OAAO;UACL,IAAI,CAACD,WAAW,CAAC,8CAA8C,CAAC;QAClE;MACF,UAAU;QACR,IAAI,CAACnB,OAAM,GAAI,KAAK;MACtB;IACF,CAAC;IACDmB,WAAWA,CAACE,YAAY,EAAE;MACxB,IAAI,CAACpB,MAAM,CAACqB,OAAM,GAAID,YAAY;MAClCL,KAAK,CAAC,UAAS,GAAIK,YAAY,CAAC;IAClC,CAAC;IACDE,WAAWA,CAAA,EAAG;MACZ,OAAO,IAAI,CAACrB,IAAI,CAACC,gBAAgB,CAACqB,MAAK,GAAI,CAAC;IAC9C;EACF;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}